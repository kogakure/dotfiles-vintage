#########################
### Zsh Configuration ###
#########################

# Path to oh-my-zsh configuration
ZSH=$HOME/.oh-my-zsh

# Zsh theme
ZSH_THEME="kogakure"

# Case-sensitive completion
CASE_SENSITIVE="true"

# Fisable autosetting terminal title
DISABLE_AUTO_TITLE="true"

# Red dots to be displayed while waiting for completion
COMPLETION_WAITING_DOTS="true"

# Plugins to load? (plugins can be found in ~/.oh-my-zsh/plugins/*)
plugins=(
  base16-shell
  bower
  brew brew-cask
  bundler capistrano gem rails rake rbenv ruby thor zeus
  colored-man-pages man
  colorize
  docker
  extract
  fabric
  git git-extras gitignore
  grunt gulp
  history-substring-search
  jira
  node npm nvm
  pip
  rsync
  sudo
  tmux tmux-cssh tmuxinator
  vagrant virtualenv
  yarn
  z
  zsh-autosuggestions
  zsh-syntax-highlighting
)

# Base16 Shell
# BASE16_SHELL="$DOTFILES/config/base16-shell/scripts/$THEME.sh"
# source $BASE16_SHELL
BASE16_SHELL=$HOME/.config/base16-shell/
[ -n "$PS1" ] && [ -s $BASE16_SHELL/profile_helper.sh ] && eval "$($BASE16_SHELL/profile_helper.sh)"

### Variable, Aliases, Functions ###
####################################

# Load exported shell variables
source $HOME/.variables

# Load oh-my-zsh
source $ZSH/oh-my-zsh.sh

# Load custom functions and aliases after .oh-my-zsh
# to prevent plugins overwriting my defaults
source $HOME/.aliases
source $HOME/.functions

### Setup ###
#############

# Vi-Mode
bindkey -v

# GRC colorizes nifty unix tools all over the place
if $(grc &>/dev/null)
then
  source `brew --prefix`/etc/grc.bashrc
fi

# Initialize autocomplete here, otherwise functions won't be loaded
autoload -U compinit
compinit

# Fish shell like syntax highlighting for zsh
source "$(brew --prefix)/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh"

# Load every completion
for config_file ($DOTFILES/**/completion/*.zsh) source $config_file

# rbenv
if which rbenv > /dev/null; then eval "$(rbenv init -)"; fi

# direnv
eval "$(direnv hook zsh)"

# npm completion
if npm -v >/dev/null 2>&1; then
  . <(npm completion)
fi

# https://github.com/rupa/z
source "$(brew --prefix)/etc/profile.d/z.sh"

# fzf
[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh

# Local overwrites (Top Secret stuff)
if [[ -e ~/.localrc ]]
then
  source ~/.localrc
fi

# Unalias
unalias rg

# Set terminal
export TERM=xterm-256color

# Increase ulimit
ulimit 32768

# tabtab source for serverless package
# uninstall by removing these lines or running `tabtab uninstall serverless`
[[ -f /Users/kogakure/.nvm/versions/node/v11.12.0/lib/node_modules/serverless/node_modules/tabtab/.completions/serverless.zsh ]] && . /Users/kogakure/.nvm/versions/node/v11.12.0/lib/node_modules/serverless/node_modules/tabtab/.completions/serverless.zsh
# tabtab source for sls package
# uninstall by removing these lines or running `tabtab uninstall sls`
[[ -f /Users/kogakure/.nvm/versions/node/v11.12.0/lib/node_modules/serverless/node_modules/tabtab/.completions/sls.zsh ]] && . /Users/kogakure/.nvm/versions/node/v11.12.0/lib/node_modules/serverless/node_modules/tabtab/.completions/sls.zsh
# tabtab source for slss package
# uninstall by removing these lines or running `tabtab uninstall slss`
[[ -f /Users/kogakure/.nvm/versions/node/v11.12.0/lib/node_modules/serverless/node_modules/tabtab/.completions/slss.zsh ]] && . /Users/kogakure/.nvm/versions/node/v11.12.0/lib/node_modules/serverless/node_modules/tabtab/.completions/slss.zsh